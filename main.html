<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ëª¨ë°”ì¼ ì²­ì²©ì¥</title>
    <style>
        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ */
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f8f8f8; margin: 0; }
        .container {
            max-width: 800px;
            width: 90%;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .section {
            display: none;
            padding: 40px 10px;
            width: 100%;
        }
        .fade-in { opacity: 0; transition: opacity 1s ease-in-out; }
        .intro p { font-size: 18px; font-weight: bold; opacity: 0; transition: opacity 1s ease-in-out; }
        .split { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .split img { width: 100%; max-width: 360px; border-radius: 10px; }
        .gallery {
            display: grid;
            gap: 10px;
            padding: 20px;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            grid-auto-rows: 150px;
            grid-auto-flow: dense;
        }
        .gallery img {
            width: 100%;
            height: 100%;
            border-radius: 10px;
            object-fit: cover;
            cursor: pointer;
        }
        .lightbox {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            touch-action: none;
        }
        /* ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .lightbox-image-container {
            position: relative;
            width: 90%;
            height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .lightbox img {
            position: absolute;
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
            user-select: none;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .lightbox img.active {
            opacity: 1;
        }
        .lightbox.active {
            display: flex;
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .navigation-buttons {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 1001;
        }
        .nav-button {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="intro" class="section intro">
            <p>ì•ˆë…•í•˜ì„¸ìš”, ì†Œì¤‘í•œ ë¶„ë“¤ì„ ì´ˆëŒ€í•©ë‹ˆë‹¤.</p>
            <p>ìš°ë¦¬ê°€ í•¨ê»˜í•˜ëŠ” íŠ¹ë³„í•œ ë‚ ì„ ì¶•í•˜í•´ ì£¼ì„¸ìš”.</p>
        </div>

        <div id="photos" class="section">
            <h2>ì‹ ë‘ & ì‹ ë¶€</h2>
            <div class="split">
                <img src="photos/groom.jpg" alt="ì‹ ë‘ ì‚¬ì§„">
                <img src="photos/bride.jpg" alt="ì‹ ë¶€ ì‚¬ì§„">
            </div>
        </div>

        <div id="gallery" class="section">
            <h2>ì›¨ë”© ì´¬ì˜</h2>
            <div class="gallery" id="gallery-container"></div>
        </div>

        <div id="location" class="section">
            <h2>ì˜ˆì‹ì¥ ìœ„ì¹˜</h2>
            <p>ì„œìš¸ ê°•ë‚¨êµ¬ â—‹â—‹ì›¨ë”©í™€</p>
            <a href="https://goo.gl/maps/example" target="_blank">ğŸ“ ì§€ë„ ë³´ê¸°</a>
        </div>
    </div>

    <div class="lightbox" id="lightbox">
        <div class="lightbox-image-container" id="lightbox-container">
            <!-- ì´ë¯¸ì§€ë“¤ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>
        <div class="navigation-buttons">
            <button class="nav-button" id="prev-button">ì´ì „</button>
            <button class="nav-button" id="next-button">ë‹¤ìŒ</button>
            <button class="nav-button" id="close-button">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let sections = document.querySelectorAll(".section");
            let intro = document.getElementById("intro");
            let textLines = intro.querySelectorAll("p");
            let index = 0;
            let allImages = [];
            let currentImageIndex = 0;
            let isTransitioning = false;

            function showText() {
                if (index < textLines.length) {
                    let text = textLines[index];
                    text.style.opacity = "1";
                    index++;
                    setTimeout(showText, 1000);
                } else {
                    showNextSection(1);
                }
            }

            function showNextSection(i) {
                if (i < sections.length) {
                    sections[i].style.display = "block";
                    sections[i].classList.add("fade-in");
                    setTimeout(() => { sections[i].style.opacity = "1"; showNextSection(i + 1); }, 1000);
                }
            }

            sections[0].style.display = "block";
            showText();

            // ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€ ë¡œë“œ
            const galleryContainer = document.getElementById("gallery-container");
            const lightboxContainer = document.getElementById("lightbox-container");
            let imageIndex = 0;

            function loadImages() {
                let img = new Image();
                img.src = `gallery/wedding${imageIndex}.jpg`;
                img.alt = `ì›¨ë”© ì‚¬ì§„ ${imageIndex}`;
                img.onload = function() {
                    let randomSize = Math.random();
                    if (randomSize > 0.7) {
                        img.style.gridColumn = "span 2";
                        img.style.gridRow = "span 2";
                    } else if (randomSize > 0.4) {
                        img.style.gridColumn = "span 2";
                    } else if (randomSize > 0.2) {
                        img.style.gridRow = "span 2";
                    }
                    img.addEventListener("click", () => openLightbox(img.src));
                    galleryContainer.appendChild(img);
                    allImages.push(img.src);

                    // ë¼ì´íŠ¸ë°•ìŠ¤ìš© ì´ë¯¸ì§€ ìš”ì†Œ ìƒì„±
                    const lightboxImg = document.createElement('img');
                    lightboxImg.src = img.src;
                    lightboxImg.alt = img.alt;
                    lightboxImg.dataset.index = imageIndex;
                    lightboxContainer.appendChild(lightboxImg);

                    imageIndex++;
                    loadImages();
                };
                img.onerror = function() {
                    console.log("No more images found.");
                };
            }
            loadImages();

            // Lightbox functionality
            const lightbox = document.getElementById("lightbox");
            const prevButton = document.getElementById("prev-button");
            const nextButton = document.getElementById("next-button");
            const closeButton = document.getElementById("close-button");
            let startX = 0;
            let currentX = 0;

            function openLightbox(src) {
                currentImageIndex = allImages.indexOf(src);
                lightbox.classList.add("active");
                updateActiveImage();
            }

            function updateActiveImage() {
                const images = lightboxContainer.querySelectorAll('img');
                images.forEach(img => img.classList.remove('active'));
                images[currentImageIndex].classList.add('active');
            }

            function showPrevImage() {
                if (isTransitioning) return;
                isTransitioning = true;

                const currentImg = lightboxContainer.querySelectorAll('img')[currentImageIndex];
                currentImageIndex = (currentImageIndex - 1 + allImages.length) % allImages.length;

                currentImg.classList.remove('active');
                setTimeout(() => {
                    updateActiveImage();
                    isTransitioning = false;
                }, 300);
            }

            function showNextImage() {
                if (isTransitioning) return;
                isTransitioning = true;

                const currentImg = lightboxContainer.querySelectorAll('img')[currentImageIndex];
                currentImageIndex = (currentImageIndex + 1) % allImages.length;

                currentImg.classList.remove('active');
                setTimeout(() => {
                    updateActiveImage();
                    isTransitioning = false;
                }, 300);
            }

            // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ìˆ˜ì •
            lightbox.addEventListener("click", (e) => {
                // í´ë¦­ëœ ìš”ì†Œë‚˜ ê·¸ ë¶€ëª¨ê°€ ì´ë¯¸ì§€, ë²„íŠ¼ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ ë¼ì´íŠ¸ë°•ìŠ¤ ë‹«ê¸°
                if (!e.target.closest('.lightbox-image-container') &&
                    !e.target.closest('.navigation-buttons')) {
                    lightbox.classList.remove("active");
                }
            });

            // í„°ì¹˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ìˆ˜ì •
            lightbox.addEventListener("touchstart", (e) => {
                // ì´ë¯¸ì§€ ì˜ì—­ì´ë‚˜ ë²„íŠ¼ ì˜ì—­ì„ í„°ì¹˜í•œ ê²½ìš°ì—ë§Œ ìŠ¤ì™€ì´í”„ ë™ì‘ ì²˜ë¦¬
                if (e.target.closest('.lightbox-image-container') ||
                    e.target.closest('.navigation-buttons')) {
                    startX = e.touches[0].clientX;
                    e.preventDefault();
                }
            });

            lightbox.addEventListener("touchmove", (e) => {
                if (startX && (e.target.closest('.lightbox-image-container') ||
                              e.target.closest('.navigation-buttons'))) {
                    currentX = e.touches[0].clientX;
                    e.preventDefault();
                }
            });

            lightbox.addEventListener("touchend", (e) => {
                if (startX && currentX && (e.target.closest('.lightbox-image-container') ||
                                         e.target.closest('.navigation-buttons'))) {
                    const diff = startX - currentX;
                    if (Math.abs(diff) > 50) {
                        if (diff > 0) {
                            showNextImage();
                        } else {
                            showPrevImage();
                        }
                    }
                }
                startX = 0;
                currentX = 0;
            });

            prevButton.addEventListener("click", showPrevImage);
            nextButton.addEventListener("click", showNextImage);
            closeButton.addEventListener("click", function() {
                lightbox.classList.remove("active");
            });

            lightbox.addEventListener("click", (e) => {
                if (e.target === lightbox) {
                    lightbox.classList.remove("active");
                }
            });
        });
    </script>

</body>
</html>